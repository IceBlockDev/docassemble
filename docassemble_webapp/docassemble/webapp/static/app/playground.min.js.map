{"version":3,"sources":["docassemble_webapp/docassemble/webapp/static/app/playground.js"],"sourcesContent":["// playground_page\nvar daCm;\nvar daAutoComp = [];\nvar exampleData;\nvar attrs_showing = Object();\nvar daExpireSession = null;\nvar vocab = [];\nvar attrs_showing = Object();\n\nvar $;\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  if (typeof $ == \"undefined\") {\n    $ = jQuery.noConflict();\n  }\n  $(document).ready(function () {\n    switch (daPage) {\n      case \"questions\":\n        readyQuestionsPage();\n        uploadListeners();\n        readyVariables();\n        break;\n      case \"files\":\n        readyFilesPage();\n        readyVariables();\n        break;\n      case \"package\":\n        readyPackagePage();\n        uploadListeners();\n        break;\n    }\n  });\n});\n\nObject.defineProperty(String.prototype, \"daSprintf\", {\n  value: function () {\n    var args = Array.from(arguments),\n      i = 0;\n    function defaultNumber(iValue) {\n      return iValue != undefined && !isNaN(iValue) ? iValue : \"0\";\n    }\n    function defaultString(iValue) {\n      return iValue == undefined ? \"\" : \"\" + iValue;\n    }\n    return this.replace(\n      /%%|%([+\\-])?([^1-9])?(\\d+)?(\\.\\d+)?([deEfhHioQqs])/g,\n      function (match, sign, filler, scale, precision, type) {\n        var strOut, space, value;\n        var asNumber = false;\n        if (match == \"%%\") return \"%\";\n        if (i >= args.length) return match;\n        value = args[i];\n        while (Array.isArray(value)) {\n          args.splice(i, 1);\n          for (var j = i; value.length > 0; j++)\n            args.splice(j, 0, value.shift());\n          value = args[i];\n        }\n        i++;\n        if (filler == undefined) filler = \" \"; // default\n        if (scale == undefined && !isNaN(filler)) {\n          scale = filler;\n          filler = \" \";\n        }\n        if (sign == undefined) sign = \"sqQ\".indexOf(type) >= 0 ? \"+\" : \"-\"; // default\n        if (scale == undefined) scale = 0; // default\n        if (precision == undefined) precision = \".0\"; // default\n        scale = parseInt(scale);\n        precision = parseInt(precision.substr(1));\n        switch (type) {\n          case \"d\":\n          case \"i\":\n            // decimal integer\n            asNumber = true;\n            strOut = parseInt(defaultNumber(value));\n            if (precision > 0) strOut += \".\" + \"0\".repeat(precision);\n            break;\n          case \"e\":\n          case \"E\":\n            // float in exponential notation\n            asNumber = true;\n            strOut = parseFloat(defaultNumber(value));\n            if (precision == 0) strOut = strOut.toExponential();\n            else strOut = strOut.toExponential(precision);\n            if (type == \"E\") strOut = strOut.replace(\"e\", \"E\");\n            break;\n          case \"f\":\n            // decimal float\n            asNumber = true;\n            strOut = parseFloat(defaultNumber(value));\n            if (precision != 0) strOut = strOut.toFixed(precision);\n            break;\n          case \"o\":\n          case \"h\":\n          case \"H\":\n            // Octal or Hexagesimal integer notation\n            strOut =\n              \"\\\\\" +\n              (type == \"o\" ? \"0\" : type) +\n              parseInt(defaultNumber(value)).toString(type == \"o\" ? 8 : 16);\n            break;\n          case \"q\":\n            // single quoted string\n            strOut = \"'\" + defaultString(value) + \"'\";\n            break;\n          case \"Q\":\n            // double quoted string\n            strOut = '\"' + defaultString(value) + '\"';\n            break;\n          default:\n            // string\n            strOut = defaultString(value);\n            break;\n        }\n        if (typeof strOut != \"string\") strOut = \"\" + strOut;\n        if ((space = strOut.length) < scale) {\n          if (asNumber) {\n            if (sign == \"-\") {\n              if (strOut.indexOf(\"-\") < 0)\n                strOut = filler.repeat(scale - space) + strOut;\n              else\n                strOut =\n                  \"-\" + filler.repeat(scale - space) + strOut.replace(\"-\", \"\");\n            } else {\n              if (strOut.indexOf(\"-\") < 0)\n                strOut = \"+\" + filler.repeat(scale - space - 1) + strOut;\n              else\n                strOut =\n                  \"-\" + filler.repeat(scale - space) + strOut.replace(\"-\", \"\");\n            }\n          } else {\n            if (sign == \"-\") strOut = filler.repeat(scale - space) + strOut;\n            else strOut = strOut + filler.repeat(scale - space);\n          }\n        } else if (asNumber && sign == \"+\" && strOut.indexOf(\"-\") < 0)\n          strOut = \"+\" + strOut;\n        return strOut;\n      },\n    );\n  },\n});\n\nObject.defineProperty(window, \"daSprintf\", {\n  value: function (str, ...rest) {\n    if (typeof str == \"string\")\n      return String.prototype.daSprintf.apply(str, rest);\n    return \"\";\n  },\n});\n\nfunction resetExpireSession() {\n  if (daExpireSession != null) {\n    window.clearTimeout(daExpireSession);\n  }\n  daExpireSession = setTimeout(function () {\n    alert(daTranslations.sessionHasExpired);\n  }, daSessionLifetimeSeconds);\n}\n\nfunction activateExample(id, scroll) {\n  var info = exampleData[id];\n  $(\"#da-example-source\").html(info[\"html\"]);\n  $(\"#da-example-source-before\").html(info[\"before_html\"]);\n  $(\"#da-example-source-after\").html(info[\"after_html\"]);\n  $(\"#da-example-image-link\").attr(\"href\", info[\"interview\"]);\n  $(\"#da-example-image\").attr(\"src\", info[\"image\"]);\n  $(\"#da-example-image-dark\").attr(\n    \"srcset\",\n    info[\"image\"].replace(\"/examples/\", \"/examplesdark/\"),\n  );\n  if (info[\"documentation\"] != null) {\n    $(\"#da-example-documentation-link\").attr(\"href\", info[\"documentation\"]);\n    $(\"#da-example-documentation-link\").removeClass(\"da-example-hidden\");\n    //$(\"#da-example-documentation-link\").slideUp();\n  } else {\n    $(\"#da-example-documentation-link\").addClass(\"da-example-hidden\");\n    //$(\"#da-example-documentation-link\").slideDown();\n  }\n  $(\".da-example-list\").addClass(\"da-example-hidden\");\n  $(\".da-example-link\").removeClass(\"da-example-active\");\n  $(\".da-example-link\").removeClass(\"active\");\n  $(\".da-example-link\").each(function () {\n    if ($(this).data(\"example\") == id) {\n      $(this).addClass(\"da-example-active\");\n      $(this).addClass(\"active\");\n      $(this).parents(\".da-example-list\").removeClass(\"da-example-hidden\");\n      if (scroll) {\n        setTimeout(function () {\n          //console.log($(this).parents(\"li\").last()[0].offsetTop);\n          //console.log($(this).parents(\"li\").last().parent()[0].offsetTop);\n          $(\".da-example-active\")\n            .parents(\"ul\")\n            .last()\n            .scrollTop(\n              $(\".da-example-active\").parents(\"li\").last()[0].offsetTop,\n            );\n        }, 0);\n      }\n      //$(this).parents(\".da-example-list\").slideDown();\n    }\n  });\n  $(\"#da-hide-full-example\").addClass(\"dainvisible\");\n  if (info[\"has_context\"]) {\n    $(\"#da-show-full-example\").removeClass(\"dainvisible\");\n  } else {\n    $(\"#da-show-full-example\").addClass(\"dainvisible\");\n  }\n  $(\"#da-example-source-before\").addClass(\"dainvisible\");\n  $(\"#da-example-source-after\").addClass(\"dainvisible\");\n}\n\nfunction saveCallback(data) {\n  if (data.action && data.action == \"reload\") {\n    location.reload(true);\n  }\n  if ($(\"#daflash\").length) {\n    $(\"#daflash\").html(data.flash_message);\n  } else {\n    $(\"#damain\").prepend(\n      daSprintf(daNotificationContainer, data.flash_message),\n    );\n  }\n  if (data.vocab_list != null) {\n    vocab = data.vocab_list;\n  }\n  if (data.current_project != null) {\n    currentProject = data.current_project;\n  }\n  history.replaceState(\n    {},\n    \"\",\n    daUrlPlaygroundPage +\n      encodeURI(\"?project=\" + currentProject + \"&file=\" + currentFile),\n  );\n  $(\"#daVariables\").val(data.active_file);\n  $(\"#share-link\").attr(\"href\", data.active_interview_url);\n  if (data.ac_list != null) {\n    daAutoComp.length = 0;\n    let n = data.ac_list.length;\n    for (let i = 0; i < n; i++) {\n      daAutoComp.push(data.ac_list[i]);\n    }\n  }\n  if (data.variables_html != null) {\n    $(\"#daplaygroundtable\").html(data.variables_html);\n    activateVariables();\n    $(\"#form\").trigger(\"reinitialize.areYouSure\");\n    var daPopoverTriggerList = [].slice.call(\n      document.querySelectorAll('[data-bs-toggle=\"popover\"]'),\n    );\n    var daPopoverList = daPopoverTriggerList.map(function (daPopoverTriggerEl) {\n      return new bootstrap.Popover(daPopoverTriggerEl, {\n        trigger: \"click\",\n        html: true,\n      });\n    });\n  }\n  daConsoleMessages = data.console_messages;\n  daShowConsoleMessages();\n}\n\nfunction daShowConsoleMessages() {\n  for (i = 0; i < daConsoleMessages.length; ++i) {\n    console.log(daConsoleMessages[i]);\n  }\n}\n\nfunction disableButtonsUntilCallback() {\n  $(\"button.dasubmitbutton\").prop(\"disabled\", true);\n  $(\"a.dasubmitbutton\").addClass(\"dadisabled\");\n}\n\nfunction enableButtons() {\n  $(\".dasubmitbutton\").prop(\"disabled\", false);\n  $(\"a.dasubmitbutton\").removeClass(\"dadisabled\");\n}\n\nfunction flash(message, priority) {\n  if (priority == null) {\n    priority = \"info\";\n  }\n  if (!$(\"#daflash\").length) {\n    $(\"body\").append(daSprintf(daNotificationContainer, \"\"));\n  }\n  var newElement = $(daSprintf(daNotificationMessage, priority, message));\n  $(\"#daflash\").append(newElement);\n  if (priority == \"success\") {\n    setTimeout(function () {\n      $(newElement).hide(300, function () {\n        $(self).remove();\n      });\n    }, 3000);\n  }\n}\n\nfunction uploadListeners() {\n  $(\"#uploadlink\").on(\"click\", function (event) {\n    $(\"#uploadlabel\").click();\n    event.preventDefault();\n    return false;\n  });\n  $(\"#uploadlabel\").on(\"click\", function (event) {\n    event.stopPropagation();\n    event.preventDefault();\n    $(\"#uploadfile\").click();\n    return false;\n  });\n  $(\"#uploadfile\").on(\"click\", function (event) {\n    event.stopPropagation();\n  });\n  $(\"#uploadfile\").on(\"change\", function (event) {\n    $(\"#fileform\").submit();\n  });\n}\n\nfunction readyQuestionsPage() {\n  daCm = daNewEditor(\n    $(\"#playground_content_container\")[0],\n    daContent,\n    \"yml\",\n    daKeymap,\n    daWrapLines,\n  );\n  $(\"#daDelete\").click(function (event) {\n    if (\n      originalFileName != $(\"#playground_name\").val() ||\n      $(\"#playground_name\").val() == \"\"\n    ) {\n      $(\"#form button[name='submit']\").click();\n      event.preventDefault();\n      return false;\n    }\n    if (!confirm(daTranslations.sureYouWantToDelete)) {\n      event.preventDefault();\n    }\n  });\n  $(\"#playground_content\").val(daCm.ev.state.doc.toString());\n  $(daCm.ev.dom).attr(\"tabindex\", 70);\n  $(daCm.ev.dom).on(\"focus\", function () {\n    daCm.ev.focus();\n  });\n  $(window).bind(\"beforeunload\", function () {\n    $(\"#playground_content\").val(daCm.ev.state.doc.toString());\n    $(\"#form\").trigger(\"checkform.areYouSure\");\n  });\n  $(\"#form\").areYouSure(daTranslations.unsavedChangesWarning);\n  $(\"#form\").bind(\"submit\", function () {\n    $(\"#playground_content\").val(daCm.ev.state.doc.toString());\n    $(\"#form\").trigger(\"reinitialize.areYouSure\");\n    return true;\n  });\n  $(\"#my-form\").trigger(\"reinitialize.areYouSure\");\n  $(\"#daVariablesReport\").on(\"shown.bs.modal\", function () {\n    daFetchVariableReport();\n  });\n  if (daEncodedExampleData) {\n    exampleData = JSON.parse(atob(daEncodedExampleData[0]));\n    activateExample(daEncodedExampleData[1], false);\n    delete window.daEncodedExampleData;\n  }\n  variablesReady();\n  resetExpireSession();\n  $(\"#playground_name\").on(\"change\", function () {\n    var newFileName = $(this).val();\n    if (!isNew && newFileName == currentFile) {\n      return;\n    }\n    for (var i = 0; i < existingFiles.length; i++) {\n      if (\n        newFileName == existingFiles[i] ||\n        newFileName + \".yml\" == existingFiles[i]\n      ) {\n        alert(daTranslations.fileExistWarning);\n        return;\n      }\n    }\n    return;\n  });\n  $(\"#share-link\").click(function (event) {\n    const shareLink = document.getElementById(\"share-link\");\n    const url = shareLink.getAttribute(\"href\");\n    const tempInput = document.createElement(\"input\");\n    tempInput.value = url;\n    document.body.appendChild(tempInput);\n\n    tempInput.select();\n    tempInput.setSelectionRange(0, 99999);\n    document.execCommand(\"copy\");\n    document.body.removeChild(tempInput);\n\n    flash(daTranslations.linkCopiedClipboard, \"success\");\n    event.preventDefault();\n    return false;\n  });\n  $(\"#daRun\").click(function (event) {\n    if (\n      originalFileName != $(\"#playground_name\").val() ||\n      $(\"#playground_name\").val() == \"\"\n    ) {\n      $(\"#form button[name='submit']\").click();\n      event.preventDefault();\n      return false;\n    }\n    $(\"#playground_content\").val(daCm.ev.state.doc.toString());\n    disableButtonsUntilCallback();\n    $.ajax({\n      type: \"POST\",\n      url: daUrlPlaygroundPageWithProject,\n      data: $(\"#form\").serialize() + \"&run=Save+and+Run&ajax=1\",\n      success: function (data) {\n        if (data.action && data.action == \"reload\") {\n          location.reload(true);\n        }\n        enableButtons();\n        resetExpireSession();\n        saveCallback(data);\n      },\n      dataType: \"json\",\n    });\n    //event.preventDefault();\n    return true;\n  });\n  var thisWindow = window;\n  $(\"#daRunSyncGD\").click(function (event) {\n    $(\"#playground_content\").val(daCm.ev.state.doc.toString());\n    $(\"#form\").trigger(\"checkform.areYouSure\");\n    if (\n      $(\"#form\").hasClass(\"dirty\") &&\n      !confirm(daTranslations.unsavedChangesWarning)\n    ) {\n      event.preventDefault();\n      return false;\n    }\n    if ($(\"#playground_name\").val() == \"\") {\n      $(\"#form button[name='submit']\").click();\n      event.preventDefault();\n      return false;\n    }\n    setTimeout(function () {\n      thisWindow.location.replace(daGoogleDriveSyncUrl);\n    }, 100);\n    return true;\n  });\n  $(\"#daRunSyncOD\").click(function (event) {\n    $(\"#playground_content\").val(daCm.ev.state.doc.toString());\n    $(\"#form\").trigger(\"checkform.areYouSure\");\n    if (\n      $(\"#form\").hasClass(\"dirty\") &&\n      !confirm(daTranslations.unsavedChangesWarning)\n    ) {\n      event.preventDefault();\n      return false;\n    }\n    if ($(\"#playground_name\").val() == \"\") {\n      $(\"#form button[name='submit']\").click();\n      event.preventDefault();\n      return false;\n    }\n    setTimeout(function () {\n      thisWindow.location.replace(daOneDriveSyncUrl);\n    }, 100);\n    return true;\n  });\n  $(\"#form button[name='submit']\").click(function (event) {\n    $(\"#playground_content\").val(daCm.ev.state.doc.toString());\n    if (\n      validForm == false ||\n      isNew == true ||\n      originalFileName != $(\"#playground_name\").val() ||\n      $(\"#playground_name\").val().trim() == \"\"\n    ) {\n      return true;\n    }\n    disableButtonsUntilCallback();\n    $.ajax({\n      type: \"POST\",\n      url: daUrlPlaygroundPageWithProject,\n      data: $(\"#form\").serialize() + \"&submit=Save&ajax=1\",\n      success: function (data) {\n        if (data.action && data.action == \"reload\") {\n          location.reload(true);\n        }\n        enableButtons();\n        resetExpireSession();\n        saveCallback(data);\n        $(\"#daflash .alert-success\").each(function () {\n          var oThis = this;\n          setTimeout(function () {\n            $(oThis).hide(300, function () {\n              $(self).remove();\n            });\n          }, 3000);\n        });\n      },\n      dataType: \"json\",\n    });\n    event.preventDefault();\n    return false;\n  });\n\n  $(\".da-example-link\").on(\"click\", function () {\n    var id = $(this).data(\"example\");\n    activateExample(id, false);\n  });\n\n  $(\".da-example-copy\").on(\"click\", function (event) {\n    if (daCm.ev.state.selection.ranges.some((r) => !r.empty)) {\n      daCm.ev.dispatch(daCm.ev.state.replaceSelection(\"\"));\n    }\n    var id = $(\".da-example-active\").data(\"example\");\n    var curPos = daCm.ev.state.selection.main.head;\n    var notFound = 1;\n    var curLine = daCm.ev.state.doc.lineAt(curPos).number;\n    let pos = 0;\n    for (\n      let lines = daCm.ev.state.doc.iterLines((from = curLine));\n      !lines.next().done && notFound;\n      pos++\n    ) {\n      let { value } = lines;\n      if (value.substring(0, 3) == \"---\" || value.substring(0, 3) == \"...\") {\n        notFound = 0;\n      }\n    }\n    let replacementText = \"---\\n\" + exampleData[id][\"source\"] + \"\\n\";\n    var newPos;\n    if (notFound) {\n      newPos = daCm.ev.state.doc.length;\n      replacementText = \"\\n\" + replacementText;\n    } else {\n      if (pos > 0) {\n        pos--;\n      }\n      newPos = daCm.ev.state.doc.line(curLine + pos).from;\n    }\n    daCm.ev.dispatch({ selection: { anchor: newPos, head: newPos } });\n    daCm.ev.dispatch(daCm.ev.state.replaceSelection(replacementText, \"around\"));\n    daCm.ev.focus();\n    event.preventDefault();\n    return false;\n  });\n\n  $(\".da-example-heading\").on(\"click\", function () {\n    var list = $(this).parent().children(\"ul\").first();\n    if (list != null) {\n      if (!list.hasClass(\"da-example-hidden\")) {\n        return;\n      }\n      $(\".da-example-list\").addClass(\"da-example-hidden\");\n      //$(\".da-example-list\").slideUp();\n      var new_link = $(this).parent().find(\"a.da-example-link\").first();\n      if (new_link.length) {\n        var id = new_link.data(\"example\");\n        activateExample(id, true);\n      }\n    }\n  });\n\n  activatePopovers();\n\n  $(\"#da-show-full-example\").on(\"click\", function () {\n    var id = $(\".da-example-active\").data(\"example\");\n    var info = exampleData[id];\n    $(this).addClass(\"dainvisible\");\n    $(\"#da-hide-full-example\").removeClass(\"dainvisible\");\n    $(\"#da-example-source-before\").removeClass(\"dainvisible\");\n    $(\"#da-example-source-after\").removeClass(\"dainvisible\");\n  });\n\n  $(\"#da-hide-full-example\").on(\"click\", function () {\n    var id = $(\".da-example-active\").data(\"example\");\n    var info = exampleData[id];\n    $(this).addClass(\"dainvisible\");\n    $(\"#da-show-full-example\").removeClass(\"dainvisible\");\n    $(\"#da-example-source-before\").addClass(\"dainvisible\");\n    $(\"#da-example-source-after\").addClass(\"dainvisible\");\n  });\n  if ($(\"#playground_name\").val().length > 0) {\n    daCm.ev.focus();\n    $(\"#form\").trigger(\"reset\");\n  } else {\n    $(\"#playground_name\").focus();\n  }\n  $(\"#daflash .alert-success\").each(function () {\n    var oThis = this;\n    setTimeout(function () {\n      $(oThis).hide(300, function () {\n        $(self).remove();\n      });\n    }, 3000);\n  });\n\n  activateVariables();\n  updateRunLink();\n  daShowConsoleMessages();\n  if (currentFile != \"\") {\n    history.replaceState(\n      {},\n      \"\",\n      daUrlPlaygroundPage +\n        encodeURI(\"?project=\" + currentProject + \"&file=\" + currentFile),\n    );\n  }\n}\n\n// variables_js()\n\nfunction activatePopovers() {\n  var daPopoverTriggerList = [].slice.call(\n    document.querySelectorAll('[data-bs-toggle=\"popover\"]'),\n  );\n  var daPopoverList = daPopoverTriggerList.map(function (daPopoverTriggerEl) {\n    return new bootstrap.Popover(daPopoverTriggerEl, {\n      trigger: \"click\",\n      html: true,\n    });\n  });\n}\n\nfunction activateVariables() {\n  $(\".daparenthetical\").on(\"click\", function (event) {\n    var reference = $(this).data(\"ref\");\n    var target = $('[data-name=\"' + reference + '\"]').first();\n    if (target.length > 0) {\n      $(\"#daplaygroundcard\").animate(\n        {\n          scrollTop: target.parent().parent().position().top,\n        },\n        1000,\n      );\n    }\n    event.preventDefault();\n  });\n\n  $(\".dashowmethods\").on(\"click\", function (event) {\n    var target_id = $(this).data(\"showhide\");\n    $(\"#\" + target_id).slideToggle();\n  });\n\n  $(\".dashowattributes\").each(function () {\n    var basename = $(this).data(\"name\");\n    if (attrs_showing.hasOwnProperty(basename)) {\n      if (attrs_showing[basename]) {\n        $('tr[data-parent=\"' + basename + '\"]').show();\n      }\n    } else {\n      attrs_showing[basename] = false;\n    }\n  });\n\n  $(\".dashowattributes\").on(\"click\", function (event) {\n    var basename = $(this).data(\"name\");\n    attrs_showing[basename] = !attrs_showing[basename];\n    $('tr[data-parent=\"' + basename + '\"]').each(function () {\n      $(this).toggle();\n    });\n  });\n  $(\".playground-variable\").on(\"click\", function (event) {\n    daCm.ev.dispatch(\n      daCm.ev.state.replaceSelection($(this).data(\"insert\"), \"around\"),\n    );\n    daCm.ev.focus();\n  });\n  $(\".dasearchicon\").on(\"click\", function (event) {\n    var query = $(this).data(\"name\");\n    if (query == null || query.length == 0) {\n      daCm.ev.dispatch({\n        selection: { anchor: daCm.ev.state.selection.main.head },\n      });\n      return;\n    }\n    daStartNewSearch(daCm.ev, query);\n    event.preventDefault();\n    return false;\n  });\n}\n\nfunction updateRunLink() {\n  if (currentProject == \"default\") {\n    $(\"#daRunButton\").attr(\n      \"href\",\n      interviewBaseUrl.replace(\":.yml\", \":\" + $(\"#daVariables\").val()),\n    );\n    $(\"a.da-example-share\").attr(\n      \"href\",\n      shareBaseUrl.replace(\":.yml\", \":\" + $(\"#daVariables\").val()),\n    );\n  } else {\n    $(\"#daRunButton\").attr(\n      \"href\",\n      interviewBaseUrl.replace(\n        \":.yml\",\n        currentProject + \":\" + $(\"#daVariables\").val(),\n      ),\n    );\n    $(\"a.da-example-share\").attr(\n      \"href\",\n      shareBaseUrl.replace(\n        \":.yml\",\n        currentProject + \":\" + $(\"#daVariables\").val(),\n      ),\n    );\n  }\n}\n\nfunction fetchVars(changed) {\n  $(\"#playground_content\").val(daCm.ev.state.doc.toString());\n  updateRunLink();\n  $.ajax({\n    type: \"POST\",\n    url: daUrlPlaygroundVariables + \"?project=\" + currentProject,\n    data:\n      \"csrf_token=\" +\n      $(\"#form input[name='csrf_token']\").val() +\n      \"&variablefile=\" +\n      $(\"#daVariables\").val() +\n      \"&ajax=1&changed=\" +\n      (changed ? 1 : 0),\n    success: function (data) {\n      if (data.action && data.action == \"reload\") {\n        location.reload(true);\n      }\n      if (data.vocab_list != null) {\n        vocab = data.vocab_list;\n      }\n      if (data.current_project != null) {\n        currentProject = data.current_project;\n      }\n      if (data.ac_list != null) {\n        daAutoComp.length = 0;\n        let n = data.ac_list.length;\n        for (let i = 0; i < n; i++) {\n          daAutoComp.push(data.ac_list[i]);\n        }\n      }\n      if (data.variables_html != null) {\n        $(\"#daplaygroundtable\").html(data.variables_html);\n        var daPopoverTriggerList = [].slice.call(\n          document.querySelectorAll('[data-bs-toggle=\"popover\"]'),\n        );\n        var daPopoverList = daPopoverTriggerList.map(\n          function (daPopoverTriggerEl) {\n            return new bootstrap.Popover(daPopoverTriggerEl, {\n              trigger: \"focus\",\n              html: true,\n            });\n          },\n        );\n        activateVariables();\n      }\n    },\n    dataType: \"json\",\n  });\n  $(\"#daVariables\").blur();\n}\n\nfunction variablesReady() {\n  $(\"#daVariables\").change(function (event) {\n    fetchVars(true);\n  });\n}\n\nfunction daFetchVariableReportCallback(data) {\n  var modal = $(\"#daVariablesReport .modal-body\");\n  if (modal.length == 0) {\n    console.log(\"No modal body on page\");\n    return;\n  }\n  if (!data.success) {\n    $(modal).html(\"<p>\" + daTranslations.failedToLoad + \"</p>\");\n    return;\n  }\n  var yaml_file = data.yaml_file;\n  modal.empty();\n  var accordion = $(\"<div>\");\n  accordion.addClass(\"accordion\");\n  accordion.attr(\"id\", \"varsreport\");\n  var n = data.items.length;\n  for (var i = 0; i < n; ++i) {\n    var item = data.items[i];\n    if (item.questions.length) {\n      var accordionItem = $(\"<div>\");\n      accordionItem.addClass(\"accordion-item\");\n      var accordionItemHeader = $(\"<h2>\");\n      accordionItemHeader.addClass(\"accordion-header\");\n      accordionItemHeader.attr(\"id\", \"accordionItemheader\" + i);\n      accordionItemHeader.html(\n        '<button class=\"accordion-button collapsed\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapse' +\n          i +\n          '\" aria-expanded=\"false\" aria-controls=\"collapse' +\n          i +\n          '\">' +\n          item.name +\n          \"</button>\",\n      );\n      accordionItem.append(accordionItemHeader);\n      var collapse = $(\"<div>\");\n      collapse.attr(\"id\", \"collapse\" + i);\n      collapse.attr(\"aria-labelledby\", \"accordionItemheader\" + i);\n      collapse.data(\"bs-parent\", \"#varsreport\");\n      collapse.addClass(\"accordion-collapse\");\n      collapse.addClass(\"collapse\");\n      var accordionItemBody = $(\"<div>\");\n      accordionItemBody.addClass(\"accordion-body\");\n      var m = item.questions.length;\n      for (var j = 0; j < m; j++) {\n        var h5 = $(\"<h5>\");\n        h5.html(\n          item.questions[j].usage.map((x) => daTranslations[x]).join(\",\"),\n        );\n        var pre = $(\"<pre>\");\n        pre.html(item.questions[j].source_code);\n        accordionItemBody.append(h5);\n        accordionItemBody.append(pre);\n        if (item.questions[j].yaml_file != yaml_file) {\n          var p = $(\"<p>\");\n          p.html(daTranslations.from + \" \" + item.questions[j].yaml_file);\n          accordionItemBody.append(p);\n        }\n      }\n      collapse.append(accordionItemBody);\n      accordionItem.append(collapse);\n      accordion.append(accordionItem);\n    }\n  }\n  modal.append(accordion);\n}\n\nfunction daFetchVariableReport(theFile = currentFile) {\n  url = daVariablesReportUrl + \"&file=\" + theFile;\n  $(\"#daVariablesReport .modal-body\").html(\n    \"<p>\" + daTranslations.loading + \"</p>\",\n  );\n  $.ajax({\n    type: \"GET\",\n    url: url,\n    success: daFetchVariableReportCallback,\n    xhrFields: {\n      withCredentials: true,\n    },\n    error: function (xhr, status, error) {\n      $(\"#daVariablesReport .modal-body\").html(\n        \"<p>\" + daTranslations.failedToLoad + \"</p>\",\n      );\n    },\n  });\n}\n\nfunction readyVariables() {\n  $(document).on(\"keydown\", function (e) {\n    if (e.which == 13) {\n      var tag = $(document.activeElement).prop(\"tagName\");\n      if (tag == \"INPUT\") {\n        e.preventDefault();\n        e.stopPropagation();\n        daCm.ev.focus();\n        return false;\n      }\n    }\n  });\n}\n\n// files page\n\nfunction saveCallbackFiles(data) {\n  if (!data.success) {\n    var n = data.errors.length;\n    for (var i = 0; i < n; ++i) {\n      $('input[name=\"' + data.errors[i].fieldName + '\"]')\n        .parents(\".input-group\")\n        .addClass(\"da-group-has-error\")\n        .after(\n          '<div class=\"da-has-error invalid-feedback\">' +\n            data.errors[i].err +\n            \"</div>\",\n        );\n    }\n    return;\n  }\n  $(\".da-has-error\").remove();\n  $(\".da-group-has-error\").removeClass(\"da-group-has-error\");\n  fetchVars(true);\n  if ($(\"#daflash\").length) {\n    $(\"#daflash\").html(data.flash_message);\n  } else {\n    $(\"#damain\").prepend(\n      daSprintf(daNotificationContainer, data.flash_message),\n    );\n  }\n}\n\nfunction scrollBottom() {\n  $(\"html, body\").animate(\n    {\n      scrollTop: $(\"#editnav\").offset().top - 53,\n    },\n    \"slow\",\n  );\n}\n\nfunction readyFilesPage() {\n  resetExpireSession();\n  $(\"#file_name\").on(\"change\", function () {\n    var newFileName = $(this).val();\n    if (!isNew && newFileName == currentFile) {\n      return;\n    }\n    for (var i = 0; i < existingFiles.length; i++) {\n      if (newFileName == existingFiles[i]) {\n        alert(daTranslations.fileExistWarning);\n        return;\n      }\n    }\n    return;\n  });\n  $(\"#dauploadbutton\").click(function (event) {\n    if ($(\"#uploadfile\").val() == \"\") {\n      event.preventDefault();\n      return false;\n    }\n  });\n  daCm = daNewEditor(\n    $(\"#playground_content_container\")[0],\n    daContent,\n    daMode,\n    daKeymap,\n    daWrapLines,\n  );\n  $(daCm.ev.dom).attr(\"tabindex\", 580);\n  $(daCm.ev.dom).on(\"focus\", function () {\n    daCm.ev.focus();\n  });\n  if (daScroll) {\n    if ($(\"#file_name\").val().length > 0) {\n      daCm.ev.focus();\n    } else {\n      $(\"#file_name\").focus();\n    }\n    scrollBottom();\n  }\n  $(\"#file_content\").val(daCm.ev.state.doc.toString());\n  $(window).bind(\"beforeunload\", function () {\n    $(\"#file_content\").val(daCm.ev.state.doc.toString());\n    $(\"#formtwo\").trigger(\"checkform.areYouSure\");\n  });\n  $(\"#daDelete\").click(function (event) {\n    if (!confirm(daTranslations.sureYouWantToDeleteFile)) {\n      event.preventDefault();\n    }\n  });\n  $(\"#formtwo\").areYouSure({ message: daTranslations.unsavedChangesWarning });\n  $(\"#formtwo\").bind(\"submit\", function (e) {\n    $(\"#file_content\").val(daCm.ev.state.doc.toString());\n    $(\"#formtwo\").trigger(\"reinitialize.areYouSure\");\n    if (daSection != \"modules\" && !isNew) {\n      var extraVariable = \"\";\n      if ($(\"#daVariables\").length) {\n        extraVariable =\n          \"&active_file=\" + encodeURIComponent($(\"#daVariables\").val());\n      }\n      $.ajax({\n        type: \"POST\",\n        url: daUrlPlaygroundFiles,\n        data: $(\"#formtwo\").serialize() + extraVariable + \"&submit=Save&ajax=1\",\n        success: function (data) {\n          if (data.action && data.action == \"reload\") {\n            location.reload(true);\n          }\n          resetExpireSession();\n          saveCallbackFiles(data);\n          $(\"#daflash .alert-success\").each(function () {\n            var oThis = this;\n            setTimeout(function () {\n              $(oThis).hide(300, function () {\n                $(self).remove();\n              });\n            }, 3000);\n          });\n        },\n        dataType: \"json\",\n      });\n      e.preventDefault();\n      return false;\n    }\n    return true;\n  });\n  variablesReady();\n  fetchVars(false);\n  $(\"#uploadfile\").on(\"change\", function () {\n    var fileName = $(this).val();\n    fileName = fileName.replace(/.*\\\\/, \"\");\n    fileName = fileName.replace(/.*\\//, \"\");\n    $(this).next(\".custom-file-label\").html(fileName);\n  });\n  $(\"#daVariablesReport\").on(\"shown.bs.modal\", function () {\n    daFetchVariableReport($(\"#daVariables\").val());\n  });\n}\n\n// packages page\n\nfunction scrollBottomPackagePage() {\n  $(\"html, body\").animate({ scrollTop: $(document).height() }, \"slow\");\n}\n\nfunction readyPackagePage() {\n  if (daScroll) {\n    scrollBottomPackagePage();\n  }\n  resetExpireSession();\n  $(\"#file_name\").on(\"change\", function () {\n    var newFileName = $(this).val();\n    if (!isNew && newFileName == currentFile) {\n      return;\n    }\n    for (var i = 0; i < existingFiles.length; i++) {\n      if (newFileName == existingFiles[i]) {\n        alert(daTranslations.packageExistsWarning);\n        return;\n      }\n    }\n    return;\n  });\n  $(\"#daDelete\").click(function (event) {\n    if (!confirm(daTranslations.sureDeletePackage)) {\n      event.preventDefault();\n    }\n  });\n  daCm = daNewEditor(\n    $(\"#playground_content_container\")[0],\n    daContent,\n    \"yml\",\n    daKeymap,\n    daWrapLines,\n  );\n  $(daCm.ev.dom).attr(\"tabindex\", 70);\n  $(daCm.ev.dom).on(\"focus\", function () {\n    daCm.ev.focus();\n  });\n  $(\"#readme\").val(daCm.ev.state.doc.toString());\n  $(daCm.ev.dom).attr(\"id\", \"readme_content\");\n  $(window).bind(\"beforeunload\", function () {\n    $(\"#readme\").val(daCm.ev.state.doc.toString());\n    $(\"#form\").trigger(\"checkform.areYouSure\");\n  });\n  $(\"#form\").areYouSure(daTranslations.unsavedChangesWarning);\n  $(\"#form\").bind(\"submit\", function () {\n    $(\"#readme\").val(daCm.ev.state.doc.toString());\n    $(\"#form\").trigger(\"reinitialize.areYouSure\");\n    return true;\n  });\n  // extra_command goes here\n  $(\"#daCancelPyPI\").click(function (event) {\n    var daWhichButton = this;\n    $(\"#pypi_message_div\").hide();\n    $(\".btn-da\").each(function () {\n      if (\n        this != daWhichButton &&\n        $(this).attr(\"id\") != \"daCancelGitHub\" &&\n        $(this).is(\":hidden\")\n      ) {\n        $(this).show();\n      }\n    });\n    $(\"#daPyPI\").html(daTranslations.pypi);\n    $(this).hide();\n    event.preventDefault();\n    return false;\n  });\n  $(\"#daCancelGitHub\").click(function (event) {\n    var daWhichButton = this;\n    $(\"#files_to_add\").prop(\"disabled\", true);\n    $(\"#commit_message_div\").hide();\n    $(\".btn-da\").each(function () {\n      if (\n        this != daWhichButton &&\n        $(this).attr(\"id\") != \"daCancelPyPI\" &&\n        $(this).is(\":hidden\")\n      ) {\n        $(this).show();\n      }\n    });\n    $(\"#daGitHub\").html(daTranslations.github);\n    $(this).hide();\n    $(\n      \"#file_name, #version, #license, #author_name, #author_email, #description, #url, #dependencies, #interview_files, #template_files, #static_files, #sources_files, #module_files\",\n    ).prop(\"disabled\", false);\n    daCm.enable();\n    event.preventDefault();\n    return false;\n  });\n  if ($(\"#github_branch option\").length == 0) {\n    $(\"#github_branch_div\").hide();\n  }\n  $(\"#github_branch\").on(\"change\", function (event) {\n    if ($(this).val() == \"<new>\") {\n      $(\"#new_branch_div\").show();\n    } else {\n      $(\"#new_branch_div\").hide();\n    }\n  });\n  $(\"#daPyPI\").click(function (event) {\n    if (\n      existingPypiVersion != null &&\n      existingPypiVersion == $(\"#version\").val()\n    ) {\n      alert(daTranslations.needToIncrement);\n      $(\"html, body\").animate({\n        scrollTop: $(\"#version\").offset().top - 90,\n        scrollLeft: 0,\n      });\n      $(\"#version\").focus();\n      var tmpStr = $(\"#version\").val();\n      $(\"#version\").val(\"\");\n      $(\"#version\").val(tmpStr);\n      event.preventDefault();\n      return false;\n    }\n    var daWhichButton = this;\n    if ($(\"#pypi_message_div\").is(\":hidden\")) {\n      $(\"#pypi_message_div\").show();\n      $(\".btn-da\").each(function () {\n        if (this != daWhichButton && $(this).is(\":visible\")) {\n          $(this).hide();\n        }\n      });\n      $(this).html(daTranslations.publish);\n      $(\"#daCancelPyPI\").show();\n      window.scrollTo(0, document.body.scrollHeight);\n      event.preventDefault();\n      return false;\n    }\n  });\n  $(\"#daGitHub\").click(function (event) {\n    var daWhichButton = this;\n    if (\n      $(\"#commit_message\").val().length == 0 ||\n      $(\"#commit_message_div\").is(\":hidden\")\n    ) {\n      if ($(\"#commit_message_div\").is(\":visible\")) {\n        $(\"#commit_message\").addClass(\"is-invalid\");\n      } else {\n        $(\"#commit_message_div\").show();\n        $(\".btn-da\").each(function () {\n          if (this != daWhichButton && $(this).is(\":visible\")) {\n            $(this).hide();\n          }\n        });\n        $(this).html(daTranslations.commit);\n        $(\"#daCancelGitHub\").show();\n        $(\n          \"#file_name, #version, #license, #author_name, #author_email, #description, #url, #dependencies, #interview_files, #template_files, #static_files, #sources_files, #module_files\",\n        ).prop(\"disabled\", true);\n        daCm.disable();\n        $(\"#files_to_add\").prop(\"disabled\", false);\n        let currentPrefix = \"docassemble/\" + $(\"#file_name\").val();\n        let fileList = [\n          \".gitignore\",\n          \"LICENSE\",\n          \"MANIFEST.in\",\n          \"README.md\",\n          \"pyproject.toml\",\n          \"setup.cfg\",\n          \"setup.py\",\n          currentPrefix + \"/__init__.py\",\n          currentPrefix + \"/data/templates/README.md\",\n          currentPrefix + \"/data/static/README.md\",\n          currentPrefix + \"/data/sources/README.md\",\n        ];\n        $(\"#interview_files\")\n          .find(\"option:selected\")\n          .each(function () {\n            fileList.push(currentPrefix + \"/data/questions/\" + $(this).text());\n          });\n        $(\"#template_files\")\n          .find(\"option:selected\")\n          .each(function () {\n            fileList.push(currentPrefix + \"/data/templates/\" + $(this).text());\n          });\n        $(\"#static_files\")\n          .find(\"option:selected\")\n          .each(function () {\n            fileList.push(currentPrefix + \"/data/static/\" + $(this).text());\n          });\n        $(\"#sources_files\")\n          .find(\"option:selected\")\n          .each(function () {\n            fileList.push(currentPrefix + \"/data/sources/\" + $(this).text());\n          });\n        $(\"#module_files\")\n          .find(\"option:selected\")\n          .each(function () {\n            fileList.push(currentPrefix + \"/\" + $(this).text());\n          });\n        $(\"#files_to_add\").empty();\n        if (fileList.length < 10) {\n          $(\"#files_to_add\").attr(\"size\", fileList.length);\n        } else {\n          $(\"#files_to_add\").attr(\"size\", 10);\n        }\n        for (var i = 0; i < fileList.length; ++i) {\n          let option = $(\"<option>\");\n          option.text(fileList[i]);\n          option.val(fileList[i]);\n          option.prop(\"selected\", true);\n          $(\"#files_to_add\").append(option);\n        }\n      }\n      $(\"#commit_message\").focus();\n      window.scrollTo(0, document.body.scrollHeight);\n      event.preventDefault();\n      return false;\n    }\n    $(\n      \"#file_name, #version, #license, #author_name, #author_email, #description, #url, #dependencies, #interview_files, #template_files, #static_files, #sources_files, #module_files\",\n    ).prop(\"disabled\", false);\n    if (\n      $(\"#pypi_also\").prop(\"checked\") &&\n      existingPypiVersion != null &&\n      existingPypiVersion == $(\"#version\").val()\n    ) {\n      alert(daTranslations.needToIncrement);\n      $(\"html, body\").animate({\n        scrollTop: $(\"#version\").offset().top - 90,\n        scrollLeft: 0,\n      });\n      $(\"#version\").focus();\n      var tmpStr = $(\"#version\").val();\n      $(\"#version\").val(\"\");\n      $(\"#version\").val(tmpStr);\n      event.preventDefault();\n      return false;\n    }\n  });\n  $(document).on(\"keydown\", function (e) {\n    if (e.which == 13) {\n      var tag = $(document.activeElement).prop(\"tagName\");\n      if (\n        tag != \"TEXTAREA\" &&\n        tag != \"A\" &&\n        tag != \"LABEL\" &&\n        tag != \"BUTTON\"\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n  });\n}\n"],"names":["daCm","daAutoComp","exampleData","attrs_showing","Object","daExpireSession","vocab","$","document","addEventListener","jQuery","noConflict","ready","daPage","readyQuestionsPage","uploadListeners","readyVariables","readyFilesPage","readyPackagePage","defineProperty","String","prototype","value","args","Array","from","arguments","i","defaultNumber","iValue","undefined","isNaN","defaultString","this","replace","match","sign","filler","scale","precision","type","strOut","space","asNumber","length","isArray","splice","j","shift","indexOf","parseInt","substr","repeat","parseFloat","toExponential","toFixed","toString","window","str","rest","daSprintf","apply","resetExpireSession","clearTimeout","setTimeout","alert","daTranslations","sessionHasExpired","daSessionLifetimeSeconds","activateExample","id","scroll","info","html","attr","removeClass","addClass","each","data","parents","last","scrollTop","offsetTop","saveCallback","action","location","reload","flash_message","prepend","daNotificationContainer","vocab_list","current_project","currentProject","history","replaceState","daUrlPlaygroundPage","encodeURI","currentFile","val","active_file","active_interview_url","ac_list","let","n","push","variables_html","activateVariables","trigger","daPopoverTriggerList","slice","call","querySelectorAll","daPopoverList","map","daPopoverTriggerEl","bootstrap","Popover","daConsoleMessages","console_messages","daShowConsoleMessages","console","log","disableButtonsUntilCallback","prop","enableButtons","flash","message","priority","append","newElement","daNotificationMessage","hide","self","remove","on","event","click","preventDefault","stopPropagation","submit","daNewEditor","daContent","daKeymap","daWrapLines","originalFileName","confirm","sureYouWantToDelete","ev","state","doc","dom","focus","bind","areYouSure","unsavedChangesWarning","daFetchVariableReport","daEncodedExampleData","JSON","parse","atob","variablesReady","newFileName","isNew","existingFiles","fileExistWarning","shareLink","getElementById","url","getAttribute","tempInput","createElement","body","appendChild","select","setSelectionRange","execCommand","removeChild","linkCopiedClipboard","ajax","daUrlPlaygroundPageWithProject","serialize","success","dataType","thisWindow","hasClass","daGoogleDriveSyncUrl","daOneDriveSyncUrl","validForm","trim","oThis","selection","ranges","some","r","empty","dispatch","replaceSelection","curPos","main","head","notFound","curLine","lineAt","number","pos","lines","iterLines","next","done","substring","replacementText","newPos","line","anchor","list","parent","children","first","new_link","find","activatePopovers","updateRunLink","reference","target","animate","position","top","target_id","slideToggle","basename","hasOwnProperty","show","toggle","query","daStartNewSearch","interviewBaseUrl","shareBaseUrl","fetchVars","changed","daUrlPlaygroundVariables","blur","change","daFetchVariableReportCallback","modal","failedToLoad","yaml_file","accordion","items","item","questions","accordionItem","accordionItemHeader","name","collapse","accordionItemBody","m","h5","usage","x","join","pre","source_code","p","theFile","daVariablesReportUrl","loading","xhrFields","withCredentials","error","xhr","status","e","which","tag","activeElement","saveCallbackFiles","errors","fieldName","after","err","scrollBottom","offset","daMode","daScroll","sureYouWantToDeleteFile","daSection","extraVariable","encodeURIComponent","daUrlPlaygroundFiles","fileName","scrollBottomPackagePage","height","packageExistsWarning","sureDeletePackage","daWhichButton","is","pypi","github","enable","existingPypiVersion","needToIncrement","scrollLeft","tmpStr","publish","scrollTo","scrollHeight","commit","disable","currentPrefix","fileList","text","option"],"mappings":"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"}